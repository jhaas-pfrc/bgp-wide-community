



IDR Working Group                                         R. Raszuk, Ed.
Internet-Draft                                              Bloomberg LP
Intended status: Standards Track                                 J. Haas
Expires: July 15, 2022                                  Juniper Networks
                                                           A. Lange, Ed.
                                                                   Nokia
                                                        January 11, 2022


                  Registered Wide BGP Community Values
           draft-ietf-idr-registered-wide-bgp-communities-03

Abstract

   Communicating routing policies via route tagging plays an important
   role in external BGP peering relations.  BGP communities are the most
   common tool used today for this purpose.  This information is
   important for the peering AS to perform mutually agreed actions
   without the need to maintain a separate offline database for each
   pair of prefixes and their associated set of action entries.

   This document establishes a new IANA maintained registry of commonly
   used Wide BGP Communities.  This public registry will allow for easy
   reference and clear interpretation of the actions associated with
   received community values.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on July 15, 2022.

Copyright Notice

   Copyright (c) 2022 IETF Trust and the persons identified as the
   document authors.  All rights reserved.




Raszuk, et al.            Expires July 15, 2022                 [Page 1]

Internet-Draft       registered-wide-bgp-communities        January 2022


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Globally significant pre-defined values . . . . . . . . . . .   3
     2.1.  Well Known Standard BGP Communities . . . . . . . . . . .   3
     2.2.  Registered pre-defined Wide BGP Communities . . . . . . .   3
       2.2.1.  General Registered Wide BGP Community Values  . . . .   4
       2.2.2.  Advertisement control Registered Wide BGP Communities   7
       2.2.3.  AS source marking Registered Wide BGP Communities . .   8
       2.2.4.  Return path influencing Registered Wide BGP
               Communities . . . . . . . . . . . . . . . . . . . . .  10
       2.2.5.  AS_PATH modifying Registered Wide BGP Communities . .  10
       2.2.6.  Local Preference Registered Community . . . . . . . .  11
       2.2.7.  AS_PATH TTL Registered Community  . . . . . . . . . .  12
       2.2.8.  GEO-LOCATION Registered Community . . . . . . . . . .  12
   3.  Example . . . . . . . . . . . . . . . . . . . . . . . . . . .  13
   4.  ECMP Hint Registered Community  . . . . . . . . . . . . . . .  14
   5.  Security considerations . . . . . . . . . . . . . . . . . . .  14
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  15
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  16
   8.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .  17
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  17
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .  17
     9.2.  Informative References  . . . . . . . . . . . . . . . . .  17
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  18

1.  Introduction

   RFC 1997 [RFC1997] defines a BGP Community Attribute.  This attribute
   is used as a tool to communicate additional information about routes
   which may help to automate peering administration.  As defined in RFC
   1997 [RFC1997] the BGP Community attribute consists of one or more
   sets of four octet values.  Each one of them specifies a different
   community.  Except for two reserved ranges, the encoding of community
   values mandates that first two octets contain the Autonomous System.
   The next two octets are available for a locally defined value.





Raszuk, et al.            Expires July 15, 2022                 [Page 2]

Internet-Draft       registered-wide-bgp-communities        January 2022


   Due to the growth of the internet, the limitations of this four-
   octet field have become apparent.  A new format, Wide BGP Communities
   has been defined to fix these limitations.  This document defines the
   common BGP communities in this format.  It also provides a new
   registry for future definitions.

2.  Globally significant pre-defined values

2.1.  Well Known Standard BGP Communities

   According to RFC 1997 as well as to IANA's Well-Known BGP Communities
   registry today the following BGP communities are defined to have
   global significance:

     +------------+---------------------+----------------------------+
     | 0xFFFF0000 | planned-shut        | [draft-francois-bgp-gshut] |
     | 0xFFFFFF01 | NO_EXPORT           | [RFC1997]                  |
     | 0xFFFFFF02 | NO_ADVERTISE        | [RFC1997]                  |
     | 0xFFFFFF03 | NO_EXPORT_SUBCONFED | [RFC1997]                  |
     | 0xFFFFFF04 | NOPEER              | [RFC3765]                  |
     +------------+---------------------+----------------------------+

   This document recommends for simplicity as well as for avoidance of
   backward compatibility issues the continued use of BGP Standard
   Community Attribute type 8 as defined in RFC 1997 to distribute non
   Autonomous System specific Well-Known BGP Communities.

   For the same reason the described registry does not intend to
   obsolete BGP Extended Community Attribute and any already defined and
   deployed extended communities.  The new registry is to be used
   primarly for new community definitions in particular those which
   require to carry various new parameters or which should be propagated
   with a controled scope and radius.

2.2.  Registered pre-defined Wide BGP Communities

   A globally unified way to express particular Autonomous System based
   routing policies is a very common request.  With the wide BGP
   community definition, we have an opportunity to define a set of new
   registered routing policies and route markings which could be passed
   within and between Autonomous Systems resulting in their common
   interpretation.  This will ease network operations.

   This document requests that IANA define and maintain a new registry
   for pre-defined Wide BGP Community values.  The allocation policy is
   on a first come first served basis.





Raszuk, et al.            Expires July 15, 2022                 [Page 3]

Internet-Draft       registered-wide-bgp-communities        January 2022


   It is recommended that an implementation supports explicit enabling
   or disabling Registered Wide BGP Communities.  It is also recommended
   that an implementation supports Registered Wide BGP Communities
   without breaking static or dynamic peer/update groups.  However,
   although recommended, support of all Registered Wide BGP Communities
   is not mandatory.  It will be valid for any BGP implementation to
   support only subset of Wide BGP Communities.

   It is strongly advised that each Autonomous System does an inbound
   verification of received Wide BGP Communities from all of its EBGP
   peers before accepting them and propagating within their own domain.

   The document does not mandate nor enforce the transitivity of a
   defined Wide BGP Community.  It is for the operator to determine the
   desired propagation AS radius by appending it to routing information.
   However, the document does provide a transitivity radius
   recommendation for the defined communities.

   The following Wide BGP Communities have global significance and their
   execution should be uniformly implemented by any BGP speaker
   supporting a given set of Wide BGP Communities.

   The defined below value of the community should be interpreted as
   registered value only if "R" - registered bit is set in the community
   Type 1 container as described in [draft-ietf-idr-wide-bgp-
   communities] Otherwise the value is local and it's actions are
   locally defined by the operator.

2.2.1.  General Registered Wide BGP Community Values

   The following set of communities is carried in Wide BGP Community
   Type 1, with the container type value (Community Registered Value) as
   per Section 6.


















Raszuk, et al.            Expires July 15, 2022                 [Page 4]

Internet-Draft       registered-wide-bgp-communities        January 2022


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            0x0001             |R C 0 0 0 0 0 0|   Hop Count   |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            Length             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                  Registered Community Value                   |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                        Source AS Number                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                       Context AS Number                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            Wide Community Target(s) TLV (optional)            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |        Wide Community Exclude Target(s) TLV (optional)        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |          Wide Community Parameter(s) TLV (optional)           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Figure 1: Wide BGP Community Type 1

   Description format:

   TYPE:
       0x0001 (constant for this registry)
   FLAGS "F":
       R - Registered bit (Set to 1 for registered values)
       C - Confederation bit (Set when applicable)
   HOP COUNT "H":
       Defines domain or sub-domain propagation radius
   LENGTH "L":
       Length of the Container Type 1 in octets
   REGISTERED COMMUNITY VALUE "R":
       Value of the community in registry
   SOURCE AS "S":
       Originator AS of Wide BGP Community
   CONTEXT AS "C":
       For registered communities this carries predefined meaning,
       otherwise it should be set to 0x00000000
   TARGET TLV "T":
       Set of atoms containing targets for execution
   EXCLUDE TARGET TLV "E":
       Set of atoms containing excluded targets for execution
   PARAMETER TLV "P":
       Set of atoms containing optional parameters for execution





Raszuk, et al.            Expires July 15, 2022                 [Page 5]

Internet-Draft       registered-wide-bgp-communities        January 2022


   BLACKHOLE
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - All transit traffic to destinations whose advertised
   routes carry this community value should be dropped.  It is
   recommended that the specified Autonomous System number should be
   eligible and verified by BGP Origin Validation functionality to
   advertise given BGP destinations.

   SOURCE FILTER
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - This community is used to easily drop traffic from a
   particular source.  All transit traffic whose source addresses have
   been tagged by this Wide BGP Community should be dropped.

   SOURCE DO RPF
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - All transit traffic whose source addresses have been
   tagged by this Wide BGP Community should have a Reverse Path
   Forwarding (RPF) check applied when crossing Autonomous System
   boundaries.  The Source Autonomous System number specified in the
   body of this community should directly indicate the peering sessions
   on which this RPF check should be performed.

   HIGH PRIORITY PREFIX
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - BGP prefixes carrying this Wide BGP Community are
   advertising high priority destinations and should be advertised to
   restarting peers before other prefixes.



Raszuk, et al.            Expires July 15, 2022                 [Page 6]

Internet-Draft       registered-wide-bgp-communities        January 2022


   ATTACK TARGET
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - The ATTACK_TARGET Registered Wide BGP Community
   indicates that BGP prefixes carrying this community are receiving an
   unusual amount of unwanted traffic most likely due to some form of
   network attack.  Network devices capable of analyzing and mitigating
   such attacks can use this community as a hint to guide their actions.

2.2.2.  Advertisement control Registered Wide BGP Communities

   NO ADVERTISE TO AS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (Peer_AS)
       L = 25 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - All routes received that carry this Wide BGP Community
   MUST NOT be advertised to BGP peers whose Autonomous System number is
   listed in the TARGET TLV field of this community.

   Semantically specifying the reserved Autonomous System value of
   0xFFFFFFFF (ANY AS) would be an equivalent of using NO_ADVERTISE
   Well-Known Standard BGP Community Attribute.

   ADVERTISE TO AS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (Peer_AS)
       L = 25 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - All routes received that carry this Wide BGP Community
   MUST ONLY be advertised to BGP peers whose Autonomous System number
   is specified in the TARGET TLV field of this community.

   Semantically specifying the reserved Autonomous System value of
   0xFFFFFFFF (ANY AS) would be an equivalent of advertisement to all
   neighbors.  Post execution this community MUST be removed.







Raszuk, et al.            Expires July 15, 2022                 [Page 7]

Internet-Draft       registered-wide-bgp-communities        January 2022


   ADVERTISE AND SET NO EXPORT
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (Peer_AS)
       L = 25 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - All routes received that carry this Wide BGP Community
   MUST be advertised to BGP peers whose Autonomous System number is
   specified in the TARGET TLV field of this community with the
   NO_EXPORT Standard BGP Community attached.

   Semantically specifying in the TARGET TLV the reserved Autonomous
   System value of 0xFFFFFFFF (ANY AS) would be an equivalent of
   advertisement to all neighbors with NO_EXPORT community being set.
   Post execution this community MUST be removed.

2.2.3.  AS source marking Registered Wide BGP Communities

   FROM PEER
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System may attach this community to
   routes received from their EBGP peers.  Once tagged, an operator may
   apply or relax local policies only on this group of destinations when
   advertising them outside the domain.

   FROM CUSTOMER
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System may attach this community to
   routes received from their customers.  Once tagged, an operator may
   apply or relax local policies only on this group of destinations when
   advertising them outside the domain.









Raszuk, et al.            Expires July 15, 2022                 [Page 8]

Internet-Draft       registered-wide-bgp-communities        January 2022


   INTERNAL
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System may attach this community to
   routes originated in their own domain.  Once tagged, and opeartor may
   apply or relax local policies only on this group of destinations when
   adversiting them outside the domain.

   FROM UPSTREAM
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System may attach this community to
   routes received from their upstream peers.  Once tagged, and opeartor
   may apply or relax local policies only on this group of destinations
   when adversiting them outside the domain.

   FROM IX
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = none
       L = 18 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System may attach this community to
   routes received from their Internet Exchange peers.  Once tagged, and
   opeartor may apply or relax local policies only on this group of
   destinations when adversiting them outside the domain.

   LEARNED FROM AS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = Type_1 (Peer_AS)
       L = 25 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System may attach this community to
   routes received from their EBGP peers by explicitly tagging them with
   their peer's Autonomous System number in the TARGET TLV field.  If
   the AS number is a two octet number the first two octets will be




Raszuk, et al.            Expires July 15, 2022                 [Page 9]

Internet-Draft       registered-wide-bgp-communities        January 2022


   filled with zeros.  It is possible to also use this community to
   carry the private AS numbers of customers.

2.2.4.  Return path influencing Registered Wide BGP Communities

   PATH HINT
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (AS#)
       L = 25 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System receiving a prefix with this Wide
   BGP Community SHOULD prefer a BGP path that traverses an Autonomous
   System whose number has been specified in the TARGET TLV field of
   this community.  One way to express this preference is to increase
   the value of the LOCAL PREFERENCE for the prefix on ingress.  Post
   policy execution this community SHOULD be kept.

   NEGATIVE PATH HINT
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (AS#)
       L = 25 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - An Autonomous System receiving a prefix with this Wide
   BGP Community SHOULD NOT prefer a BGP path that traverses an
   Autonomous System whose number has been specified in the TARGET TLV
   field of this community.  One way to express this preference is to
   decrease the value of the LOCAL PREFERENCE for the prefix on ingress.
   Post policy execution this community SHOULD be kept.

2.2.5.  AS_PATH modifying Registered Wide BGP Communities

   PREPEND N TIMES BY AS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (AS#)
       L = 29 octets               E = none
       R = IANA assigned           P = Type_4 (0xAA)

   DESCRIPTION - The Autonomous System specified in the TARGET TLV field
   of this community should prepend its own Autonomous System number N
   times (encoded as 0xAA) when advertising routes tagged with this
   community to peers.  The number of requested AS prepends is provided
   in the PARAMETERS TLV field value.  Post execution this community
   MUST be removed.



Raszuk, et al.            Expires July 15, 2022                [Page 10]

Internet-Draft       registered-wide-bgp-communities        January 2022


   PREPEND N TIMES TO AS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (AS#)
       L = 29 octets               E = none
       R = IANA assigned           P = Type_4 (0xAA)

   DESCRIPTION - For prefixes tagged with this wide community, an
   Autonomous System advertising routes externally should prepend its
   own Autonomous System number N times (encoded as 0xAA) to peers
   indicated in the TARGET TLV field.  The number of requested AS
   prepends is provided in the PARAMETERS TLV field.  Post execution
   this community MUST be removed.

   REPLACE BY
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = Type_1 (AS#)
       L = 25 octets               E = none
       R = IANA assigned           P = none

   DESCRIPTION - For prefixes tagged with this wide community, an
   Autonomous System advertising routes externally should replace any
   occurrence of an Autonomous System number specified in the TARGET TLV
   field with the advertising domain's own Autonomous System number.
   Post execution this community MUST be removed.

2.2.6.  Local Preference Registered Community

   LOCAL PREFERENCE
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = none
       L = 22 octets               E = none
       R = IANA assigned           P = Type_4 (ABBBBBBB)

       SEMANTICS of PARAMETERS TLV
           1 octet 1st bit indicates:
               0-increment, 1-decrement
               7 bits - value of local preference value 1..127

   DESCRIPTION - An Autonomous System may suggest to its EBGP neighbor
   the adjustments to the value of local preference as specified by a
   given domain's local policy.  The values of the requested increment
   or decrement of the local preference value is carried in the
   PARAMETERS TLV field.  Post execution this community MUST be removed.





Raszuk, et al.            Expires July 15, 2022                [Page 11]

Internet-Draft       registered-wide-bgp-communities        January 2022


2.2.7.  AS_PATH TTL Registered Community

   AS_PATH TTL MAX RADIUS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = none
       L = 22 octets               E = none
       R = IANA assigned           P = Type_4 (0xAA) max AS_PATH radius

   DESCRIPTION - An Autonomous System may suggest to its peer that the
   peer drop the advertised prefix if the prefix's AS_PATH attribute
   length would become equal to or greater than the encoded value once
   the BGP speaker applies its own AS_PATH prepending.  The value of the
   maximum AS_PATH length requested is specified in the PARAMETERS TLV
   field.  Post comparison this community MUST be kept.

2.2.8.  GEO-LOCATION Registered Community

   GEOGRAPHIC LOCATION WHERE BGP ROUTE IS INTRODUCED TO AS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = 0x00000000
       H = Operator defined        T = none
       L = 26 octets               E = none
       R = IANA assigned           P = Type_8 (5 UTF-8 characters)

   DESCRIPTION - Autonomous Systems may attach this community to routes
   received from EBGP neighbors or introduced to BGP by other routing
   protocols in order to identify the geographic location where the
   route was introduced to the AS.  The "right-most" two octets of
   PARAMETERS TLV correspond to an ISO3166-1 alpha-2 country identifier,
   while the "left-most" three octets may express a more specific
   geographic location, such as a city or IXP encoded in 3 octets.

   Example:

  Wide BGP Community describing a prefix learned by the AS at London, GB
       HOP COUNT - operator defined
       LENGTH - 26
       PARAMETERS - 3 octets locality string + 2 octets country id.












Raszuk, et al.            Expires July 15, 2022                [Page 12]

Internet-Draft       registered-wide-bgp-communities        January 2022


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            0x0001             |       0x80    |      0xFF     |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            0x001A             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         IANA assigned                         |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                           0x000000AS                          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                           0x00000000                          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      0x08     |            0x0008             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |       "L"     |       "O"     |       "N"     |      "G"      |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |       "B"     |
     +-+-+-+-+-+-+-+-+

3.  Example

   Customer of the source AS number 100 requests to execute AS_PATH
   prepend 4 times when advertising the prefixes to AS number 2424.  We
   will use the following community assigned on ingress or at the prefix
   origination.

   PREPEND N TIMES TO AS
       Type: 0x0001                S = 0x00000064 (dec 100)
       F = 0x80                    C = 0x00000000
       H = 0x00                    T = 0x00000978 (dec 2424)
       L = 0x001D (dec 29 octets)  E = none
       R = IANA assigned           P = 0x04 (dec 4)


















Raszuk, et al.            Expires July 15, 2022                [Page 13]

Internet-Draft       registered-wide-bgp-communities        January 2022


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            0x0001             |       0x80    |      0x00     |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            0x001D             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         IANA assigned                         |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                           0x00000064                          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                           0x00000000                          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      0x01     |            0x0007             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                           0x00000978                          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      0x04     |            0x0004             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      0x04     |
     +-+-+-+-+-+-+-+-+

4.  ECMP Hint Registered Community

   AS_PATH TTL MAX RADIUS
       Type: 0x0001                S = src AS #
       F = 0x80                    C = publisher AS #
       H = Operator's defined      T = none
       L = 22 octets               E = none
       R = IANA assigned           P = Type_4 (0xAA) max AS_PATH radius

   DESCRIPTION - In multistage networks with large scale Equal Cost
   MultiPath (ECMP), it is often useful to separate flows towards a
   single destination among different paths along the parallel set at
   each stage.  This wide community allows the operator to send a "hint"
   to the ingress router on how to set either the MPLS entropy label
   [RFC6790] or the IPv6 flow label [RFC3697] to achieve such flow
   separation.  The Integer list given in the community can contain a
   label that is used by the receiver: Directly as an IPv6 flow label,
   Directly as an MPLS entropy label, As a seed used to calculate either
   a flow or entropy label

5.  Security considerations

   All the security considerations for BGP Communities as well as for
   BGP Extended Communities RFCs apply here.





Raszuk, et al.            Expires July 15, 2022                [Page 14]

Internet-Draft       registered-wide-bgp-communities        January 2022


6.  IANA Considerations

   This document requests IANA to define and maintain a new registry
   named: "Registered Wide BGP Communities Values".  The reserved pool
   of 0x00000000-0xFFFFFFFF has been defined for its allocations.  The
   allocation policy is on a first come first served basis.

   This document makes the following assignments for the Registered Wide
   BGP Community values:

             +---------------------------------+------------+
             | Name                            | Type Value |
             +---------------------------------+------------+
             | BLACKHOLE                       |     1      |
             | SOURCE FILTER                   |     2      |
             | SOURCE DO RPF                   |     3      |
             | HIGH PRIORITY PREFIX            |     4      |
             | ATTACK TARGET                   |     5      |
             |                                 |            |
             | NO ADVERTISE TO AS              |     6      |
             | ADVERTISE TO AS                 |     7      |
             | ADVERTISE AND SET NO EXPORT     |     8      |
             |                                 |            |
             | FROM PEER                       |     9      |
             | FROM CUSTOMER                   |     10     |
             | INTERNAL                        |     11     |
             | FROM UPSTREAM                   |     12     |
             | FROM IX                         |     13     |
             | LEARNED FROM AS                 |     14     |
             |                                 |            |
             | PATH HINT                       |     15     |
             | PATH NEGATIVE HINT              |     16     |
             |                                 |            |
             | PREPEND N TIMES BY AS           |     17     |
             | PREPEND N TIMES TO AS           |     18     |
             | REPLACE BY                      |     19     |
             |                                 |            |
             | LOCAL PREFERENCE                |     20     |
             | AS_PATH TTL MAX RADIUS          |     21     |
             | GEO-LOCATION                    |     22     |
             | ECMP HINT                       |     23     |
             |                                 |            |
             | FREE POOL                       |    24..    |
             +---------------------------------+------------+







Raszuk, et al.            Expires July 15, 2022                [Page 15]

Internet-Draft       registered-wide-bgp-communities        January 2022


7.  Contributors

   The following people contributed significantly to the content of the
   document:

   Bruno Decraene
   France Telecom
   38-40 rue du General Leclerc
   92794 Issi Moulineaux cedex 9
   France
   Email: bruno.decraene@orange-ftgroup.com

   Shintaro Kojima
   OTEMACHI 1st. SQUARE EAST TOWER, 3F
   1-5-1, Otemachi,
   Chiyoda-ku, Tokyo 100-0004
   Japan
   Email: koji@mfeed.ad.jp

   Juan Alcaide
   Cisco Systems
   Research Triangle Park, NC
   United States
   Email: jalcaide@cisco.com

   Burjiz Pithawala
   Cisco Systems
   170 West Tasman Dr
   San Jose, CA
   United States
   Email: bpithaw@cisco.com

   Saku Ytti
   TDC Oy
   Mechelininkatu 1a
   00094 TDC
   Finland
   Email: ytti@tdc.net

   Paul Jakma
   School of Computing Science, Uni. of Glasgow
   Sir Alwyn Williams Building
   University of Glasgow
   Glasgow
   G1 5AE
   UK
   Email: paulj@dcs.gla.ac.uk




Raszuk, et al.            Expires July 15, 2022                [Page 16]

Internet-Draft       registered-wide-bgp-communities        January 2022


   Russ White
   Ericsson
   Oak Island, NC  28465
   USA
   Email: russw@riw.us

8.  Acknowledgments

   Authors would like to thank Enke Chen, Pedro Marques, Alton Lo and
   Jeff Wheeler for their valuable input.

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4271]  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., "A
              Border Gateway Protocol 4 (BGP-4)", RFC 4271,
              DOI 10.17487/RFC4271, January 2006,
              <https://www.rfc-editor.org/info/rfc4271>.

   [RFC4360]  Sangli, S., Tappan, D., and Y. Rekhter, "BGP Extended
              Communities Attribute", RFC 4360, DOI 10.17487/RFC4360,
              February 2006, <https://www.rfc-editor.org/info/rfc4360>.

9.2.  Informative References

   [RFC1997]  Chandra, R., Traina, P., and T. Li, "BGP Communities
              Attribute", RFC 1997, DOI 10.17487/RFC1997, August 1996,
              <https://www.rfc-editor.org/info/rfc1997>.

   [RFC1998]  Chen, E. and T. Bates, "An Application of the BGP
              Community Attribute in Multi-home Routing", RFC 1998,
              DOI 10.17487/RFC1998, August 1996,
              <https://www.rfc-editor.org/info/rfc1998>.

   [RFC4384]  Meyer, D., "BGP Communities for Data Collection", BCP 114,
              RFC 4384, DOI 10.17487/RFC4384, February 2006,
              <https://www.rfc-editor.org/info/rfc4384>.

   [RFC4893]  Vohra, Q. and E. Chen, "BGP Support for Four-octet AS
              Number Space", RFC 4893, DOI 10.17487/RFC4893, May 2007,
              <https://www.rfc-editor.org/info/rfc4893>.




Raszuk, et al.            Expires July 15, 2022                [Page 17]

Internet-Draft       registered-wide-bgp-communities        January 2022


   [RFC5668]  Rekhter, Y., Sangli, S., and D. Tappan, "4-Octet AS
              Specific BGP Extended Community", RFC 5668,
              DOI 10.17487/RFC5668, October 2009,
              <https://www.rfc-editor.org/info/rfc5668>.

Authors' Addresses

   Robert Raszuk (editor)
   Bloomberg LP
   731 Lexington Ave
   New York City, NY  10022
   USA

   Email: robert@raszuk.net


   Jeffrey Haas
   Juniper Networks
   1194 N.Mathilda Ave
   Sunnyvale, CA  94089
   US

   Email: jhaas@pfrc.org


   Andrew Lange (editor)
   Nokia
   777 E. Middlefield Road
   Mountain View, CA  94043
   US

   Email: andrew.lange@nokia.com



















Raszuk, et al.            Expires July 15, 2022                [Page 18]
